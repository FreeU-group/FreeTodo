# 通知功能测试指南

## 测试方式

### 1. 在 Electron 应用中测试（开发模式）

1. 启动开发服务器：
   ```bash
   pnpm dev
   ```

2. 在另一个终端启动 Electron：
   ```bash
   pnpm electron:dev
   ```

3. 打开 Debug 面板（点击底部 Dock 中的相机图标）

4. 在 Debug 面板顶部找到"测试通知"按钮

5. 点击"测试通知"按钮：
   - 会触发一个 mock 通知
   - 灵动岛会显示通知
   - 在 Electron 环境中，系统通知也会弹出（macOS/Windows/Linux）

6. 点击系统通知：
   - 应用窗口会被聚焦/激活

7. 点击"清除通知"按钮：
   - 清除当前显示的通知

### 2. Mock 通知类型

测试按钮会循环显示以下类型的通知：

1. **新待办事项待确认** - 模拟 draft todo 通知
2. **系统通知** - 通用系统通知
3. **提醒** - 提醒类通知
4. **新待办事项待确认（draft-todos 源）** - 模拟来自轮询的 draft todo 通知

每次点击会生成一个带时间戳的唯一 ID，确保每次都是"新通知"，从而触发系统通知。

### 3. 测试要点

- ✅ 新通知应该触发系统通知
- ✅ 相同 ID 的通知不应重复触发系统通知
- ✅ 点击系统通知应该聚焦应用窗口
- ✅ 非 Electron 环境（浏览器）应该正常工作，不报错
- ✅ 灵动岛通知显示正常
- ✅ 通知展开/收起功能正常

### 4. 注意事项

- 在 macOS 上，首次显示系统通知时可能需要授权通知权限
- 如果系统通知没有弹出，请检查系统通知设置
- 在浏览器环境中，系统通知功能不可用，但灵动岛通知仍然可以正常工作
